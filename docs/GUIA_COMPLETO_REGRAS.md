# üìö Guia Completo: Regras das Modalidades, C√°lculos e L√≥gica de Premia√ß√£o

**√öltima atualiza√ß√£o:** 14 de Janeiro de 2026

---

## üìã √çndice

1. [Vis√£o Geral](#vis√£o-geral)
2. [Modalidades Dispon√≠veis](#modalidades-dispon√≠veis)
3. [Sistema de Posi√ß√µes](#sistema-de-posi√ß√µes)
4. [Tipos de Divis√£o de Valor](#tipos-de-divis√£o-de-valor)
5. [C√°lculo de Valores](#c√°lculo-de-valores)
6. [L√≥gica de Premia√ß√£o](#l√≥gica-de-premia√ß√£o)
7. [Convers√µes e Grupos](#convers√µes-e-grupos)
8. [Modalidades Especiais](#modalidades-especiais)
9. [Exemplos Pr√°ticos](#exemplos-pr√°ticos)
10. [Tabela de Cota√ß√µes](#tabela-de-cota√ß√µes)

---

## üéØ Vis√£o Geral

O sistema de apostas do Jogo do Bicho funciona com base em:
- **Modalidades**: Tipo de aposta (Grupo, Milhar, Dupla de Grupo, etc.)
- **Posi√ß√µes**: Intervalo de pr√™mios onde a aposta √© v√°lida (1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫)
- **Divis√£o de Valor**: Como o valor √© distribu√≠do entre os palpites
- **Cota√ß√µes Din√¢micas**: Multiplicadores que variam conforme configura√ß√£o

---

## üé≤ Modalidades Dispon√≠veis

### Modalidades de Grupo

#### 1. **Grupo** (1 grupo)
- **Descri√ß√£o**: Aposta em um √∫nico grupo (animal)
- **Exemplo**: Apostar no grupo 12 (Elefante)
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 18.00

#### 2. **Dupla de Grupo** (2 grupos)
- **Descri√ß√£o**: Aposta em dois grupos que devem aparecer nas posi√ß√µes selecionadas
- **Exemplo**: Apostar nos grupos 12-13 (Elefante e Le√£o)
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 16.00
- **Regra**: Ambos os grupos devem estar presentes nas posi√ß√µes selecionadas

#### 3. **Terno de Grupo** (3 grupos)
- **Descri√ß√£o**: Aposta em tr√™s grupos que devem aparecer nas posi√ß√µes selecionadas
- **Exemplo**: Apostar nos grupos 12-13-14 (Elefante, Le√£o e Gato)
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 150.00
- **Regra**: Todos os tr√™s grupos devem estar presentes nas posi√ß√µes selecionadas

#### 4. **Quadra de Grupo** (4 grupos)
- **Descri√ß√£o**: Aposta em quatro grupos que devem aparecer nas posi√ß√µes selecionadas
- **Exemplo**: Apostar nos grupos 12-13-14-15
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 1000.00
- **Regra**: Todos os quatro grupos devem estar presentes nas posi√ß√µes selecionadas

### Modalidades Num√©ricas

#### 5. **Dezena** (2 d√≠gitos)
- **Descri√ß√£o**: Aposta nos √∫ltimos 2 d√≠gitos de um milhar
- **Exemplo**: Apostar "23" (aparece em milhares terminados em 23)
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 60.00
- **Limite**: Apenas 2 d√≠gitos (00-99)

#### 6. **Centena** (3 d√≠gitos)
- **Descri√ß√£o**: Aposta nos √∫ltimos 3 d√≠gitos de um milhar
- **Exemplo**: Apostar "123" (aparece em milhares terminados em 123)
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 600.00
- **Limite**: Apenas 3 d√≠gitos (000-999)

#### 7. **Milhar** (4 d√≠gitos)
- **Descri√ß√£o**: Aposta no milhar completo
- **Exemplo**: Apostar "1234" (deve aparecer exatamente 1234)
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫
- **Cota√ß√£o**: 1x R$ 6000.00
- **Limite**: Apenas 4 d√≠gitos (0000-9999)

### Modalidades Invertidas

#### 8. **Dezena Invertida** (2 d√≠gitos)
- **Descri√ß√£o**: Aposta nos √∫ltimos 2 d√≠gitos em qualquer ordem
- **Exemplo**: Apostar "23" ‚Üí aceita "23" e "32"
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 60.00
- **Combina√ß√µes**: Gera todas as permuta√ß√µes distintas dos d√≠gitos

#### 9. **Centena Invertida** (3 d√≠gitos)
- **Descri√ß√£o**: Aposta nos √∫ltimos 3 d√≠gitos em qualquer ordem
- **Exemplo**: Apostar "123" ‚Üí aceita "123", "132", "213", "231", "312", "321"
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫, 1¬∫-7¬∫
- **Cota√ß√£o**: 1x R$ 600.00
- **Combina√ß√µes**: Gera todas as permuta√ß√µes distintas dos d√≠gitos

#### 10. **Milhar Invertida** (4 d√≠gitos)
- **Descri√ß√£o**: Aposta no milhar completo em qualquer ordem
- **Exemplo**: Apostar "1234" ‚Üí aceita todas as permuta√ß√µes de 1,2,3,4
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫
- **Cota√ß√£o**: 1x R$ 6000.00
- **Combina√ß√µes**: Gera todas as permuta√ß√µes distintas dos d√≠gitos

### Modalidades Combinadas

#### 11. **Milhar/Centena**
- **Descri√ß√£o**: Aposta que ganha se acertar o milhar OU a centena
- **Exemplo**: Apostar "1234" ‚Üí ganha se aparecer "1234" ou "234"
- **Posi√ß√µes v√°lidas**: 1¬∫, 1¬∫-3¬∫, 1¬∫-5¬∫
- **Cota√ß√£o**: 1x R$ 3300.00

### Modalidades de Passe

#### 12. **Passe vai** (1¬∫ ‚Üí 2¬∫)
- **Descri√ß√£o**: O grupo do 1¬∫ pr√™mio deve passar para o 2¬∫ pr√™mio
- **Exemplo**: Se 1¬∫ √© grupo 12 e 2¬∫ √© grupo 12 ‚Üí ganha
- **Posi√ß√µes fixas**: Apenas 1¬∫-2¬∫
- **Cota√ß√£o**: 1x R$ 90.00
- **Regra**: Grupo do 1¬∫ deve ser igual ao grupo do 2¬∫

#### 13. **Passe vai e vem** (1¬∫ ‚Üî 2¬∫)
- **Descri√ß√£o**: O grupo do 1¬∫ deve passar para o 2¬∫ OU vice-versa
- **Exemplo**: Se 1¬∫ √© grupo 12 e 2¬∫ √© grupo 12 ‚Üí ganha
- **Posi√ß√µes fixas**: Apenas 1¬∫-2¬∫
- **Cota√ß√£o**: 1x R$ 90.00
- **Regra**: Aceita ambas as ordens (12‚Üí12 ou 12‚Üí12)

---

## üìç Sistema de Posi√ß√µes

### Posi√ß√µes Padr√£o

1. **1¬∫ Pr√™mio**: Apenas o primeiro lugar
2. **1¬∫ ao 3¬∫**: Primeiro, segundo e terceiro lugares
3. **1¬∫ ao 5¬∫**: Primeiro ao quinto lugar
4. **1¬∫ ao 7¬∫**: Primeiro ao s√©timo lugar

### Posi√ß√µes Personalizadas

O sistema tamb√©m aceita posi√ß√µes personalizadas:
- **Formato**: "1", "2", "3", "4", "5", "6", "7" (individual)
- **Formato**: "1-3", "1-5", "1-7", "2-5", etc. (intervalo)
- **Valida√ß√£o**: Apenas n√∫meros de 1 a 7, intervalo deve ser crescente

### C√°lculo de Quantidade de Posi√ß√µes

```typescript
qtdPosicoes = pos_to - pos_from + 1

Exemplos:
- 1¬∫ ao 3¬∫: pos_from=1, pos_to=3 ‚Üí qtdPosicoes = 3
- 1¬∫ ao 5¬∫: pos_from=1, pos_to=5 ‚Üí qtdPosicoes = 5
- 1¬∫ ao 7¬∫: pos_from=1, pos_to=7 ‚Üí qtdPosicoes = 7
```

---

## üí∞ Tipos de Divis√£o de Valor

### 1. **"Para cada palpite"** (`divisionType: 'each'`)

**Descri√ß√£o**: O valor digitado √© aplicado a CADA palpite individualmente.

**F√≥rmula**:
```
Valor por palpite = Valor digitado
Valor total = Valor digitado √ó Quantidade de palpites
```

**Exemplo**:
- Valor digitado: R$ 10,00
- Quantidade de palpites: 3
- Valor por palpite: R$ 10,00
- Valor total da aposta: R$ 30,00

### 2. **"Para todos os palpites"** (`divisionType: 'all'`)

**Descri√ß√£o**: O valor digitado √© dividido entre TODOS os palpites.

**F√≥rmula**:
```
Valor por palpite = Valor digitado √∑ Quantidade de palpites
Valor total = Valor digitado
```

**Exemplo**:
- Valor digitado: R$ 30,00
- Quantidade de palpites: 3
- Valor por palpite: R$ 10,00
- Valor total da aposta: R$ 30,00

---

## üßÆ C√°lculo de Valores

### Fun√ß√£o: `calcularValorTotalAposta()`

Calcula o valor total que ser√° debitado da carteira do usu√°rio.

```typescript
function calcularValorTotalAposta(
  valorDigitado: number,
  qtdPalpites: number,
  divisaoTipo: 'all' | 'each'
): number {
  if (divisaoTipo === 'each') {
    return valorDigitado * qtdPalpites
  } else {
    return valorDigitado
  }
}
```

### Fun√ß√£o: `calcularValorPorPalpite()`

Calcula quanto cada palpite individual vale.

```typescript
function calcularValorPorPalpite(
  valorDigitado: number,
  qtdPalpites: number,
  divisaoTipo: 'all' | 'each'
): number {
  if (divisaoTipo === 'each') {
    return valorDigitado
  } else {
    return valorDigitado / qtdPalpites
  }
}
```

### C√°lculo de Unidades

Para modalidades num√©ricas (especialmente invertidas), o sistema calcula unidades:

```typescript
// Para modalidades normais
unidades = 1 √ó qtdPosicoes

// Para modalidades invertidas
unidades = permutacoes √ó qtdPosicoes

// Valor unit√°rio
valorUnitario = valorPorPalpite √∑ unidades
```

**Exemplo - Dezena Invertida "23"**:
- Permuta√ß√µes: ["23", "32"] = 2
- Posi√ß√µes: 1¬∫-5¬∫ = 5
- Unidades: 2 √ó 5 = 10
- Se valor por palpite = R$ 10,00
- Valor unit√°rio: R$ 10,00 √∑ 10 = R$ 1,00

---

## üèÜ L√≥gica de Premia√ß√£o

### 1. Busca de Cota√ß√£o Din√¢mica

O sistema primeiro tenta buscar a cota√ß√£o da configura√ß√£o (`MODALITIES`):

```typescript
function buscarCotacaoDinamica(modalityName: string): number | null {
  // Busca em MODALITIES: "1x R$ 16.00" ‚Üí extrai 16
  // Retorna o multiplicador num√©rico
}
```

**Exemplo**:
- Modalidade: "Dupla de Grupo"
- Valor em MODALITIES: "1x R$ 16.00"
- Multiplicador extra√≠do: 16

### 2. Busca de Odd (Fallback)

Se n√£o encontrar cota√ß√£o din√¢mica, usa tabela fixa:

```typescript
function buscarOdd(
  modalidade: ModalityType,
  pos_from: number,
  pos_to: number,
  modalityName?: string
): number {
  // Primeiro tenta buscarCotacaoDinamica()
  // Se n√£o encontrar, usa oddsTable fixa
}
```

### 3. C√°lculo de Pr√™mio por Unidade

```typescript
premioUnidade = odd √ó valorUnitario
```

**Exemplo**:
- Odd: 16 (Dupla de Grupo)
- Valor unit√°rio: R$ 1,00
- Pr√™mio por unidade: R$ 16,00

### 4. C√°lculo de Pr√™mio Total

```typescript
premioTotal = acertos √ó premioUnidade
```

**Exemplo**:
- Acertos: 2
- Pr√™mio por unidade: R$ 16,00
- Pr√™mio total: R$ 32,00

---

## üîÑ Convers√µes e Grupos

### Convers√£o Dezena ‚Üí Grupo

Cada grupo cont√©m 4 dezenas consecutivas:

```
Grupo 1:  01, 02, 03, 04  (Avestruz)
Grupo 2:  05, 06, 07, 08  (√Åguia)
Grupo 3:  09, 10, 11, 12  (Burro)
...
Grupo 25: 97, 98, 99, 00  (Vaca)
```

**F√≥rmula**:
```typescript
function dezenaParaGrupo(dezena: number): number {
  if (dezena === 0) return 25  // 00 pertence ao grupo 25
  return Math.floor((dezena - 1) / 4) + 1
}
```

### Convers√£o Milhar ‚Üí Grupo

Extrai os √∫ltimos 2 d√≠gitos do milhar e converte para grupo:

```typescript
function milharParaGrupo(milhar: number): number {
  const dezena = milhar % 100  // √öltimos 2 d√≠gitos
  return dezenaParaGrupo(dezena)
}
```

**Exemplos**:
- Milhar 1234 ‚Üí Dezena 34 ‚Üí Grupo 9 (Cobra)
- Milhar 5678 ‚Üí Dezena 78 ‚Üí Grupo 20 (Peru)
- Milhar 9900 ‚Üí Dezena 00 ‚Üí Grupo 25 (Vaca)

---

## üéØ Modalidades Especiais

### Passe vai

**Regra**: O grupo do 1¬∫ pr√™mio deve ser igual ao grupo do 2¬∫ pr√™mio.

**Exemplo**:
- Resultado: 1¬∫ = 1234 (grupo 9), 2¬∫ = 5678 (grupo 20)
- Aposta: Passe vai grupo 9
- Resultado: ‚ùå Perdeu (grupos diferentes)

**Exemplo**:
- Resultado: 1¬∫ = 1234 (grupo 9), 2¬∫ = 9876 (grupo 9)
- Aposta: Passe vai grupo 9
- Resultado: ‚úÖ Ganhou (mesmo grupo)

### Passe vai e vem

**Regra**: Aceita ambas as ordens (1¬∫‚Üí2¬∫ ou 2¬∫‚Üí1¬∫).

**Exemplo**:
- Resultado: 1¬∫ = 1234 (grupo 9), 2¬∫ = 5678 (grupo 20)
- Aposta: Passe vai e vem grupos 9-20
- Resultado: ‚ùå Perdeu (grupos diferentes)

**Exemplo**:
- Resultado: 1¬∫ = 1234 (grupo 9), 2¬∫ = 9876 (grupo 9)
- Aposta: Passe vai e vem grupos 9-9
- Resultado: ‚úÖ Ganhou (mesmo grupo)

---

## üìä Exemplos Pr√°ticos

### Exemplo 1: Dupla de Grupo - "Para cada palpite"

**Aposta**:
- Modalidade: Dupla de Grupo
- Palpites: [12-13, 14-15, 16-17]
- Posi√ß√£o: 1¬∫ ao 3¬∫
- Valor digitado: R$ 10,00
- Divis√£o: "Para cada palpite"

**C√°lculos**:
```
Quantidade de palpites: 3
Valor por palpite: R$ 10,00
Valor total: R$ 10,00 √ó 3 = R$ 30,00

Quantidade de posi√ß√µes: 3 (1¬∫, 2¬∫, 3¬∫)
Unidades por palpite: 1 √ó 3 = 3
Valor unit√°rio: R$ 10,00 √∑ 3 = R$ 3,33

Cota√ß√£o: 16x
Pr√™mio por unidade: R$ 3,33 √ó 16 = R$ 53,33
```

**Resultado**: Se acertar 1 palpite nas 3 posi√ß√µes:
```
Acertos: 3 unidades
Pr√™mio total: 3 √ó R$ 53,33 = R$ 160,00
```

### Exemplo 2: Milhar - "Para todos os palpites"

**Aposta**:
- Modalidade: Milhar
- Palpites: ["1234", "5678", "9012"]
- Posi√ß√£o: 1¬∫ ao 5¬∫
- Valor digitado: R$ 30,00
- Divis√£o: "Para todos os palpites"

**C√°lculos**:
```
Quantidade de palpites: 3
Valor total: R$ 30,00
Valor por palpite: R$ 30,00 √∑ 3 = R$ 10,00

Quantidade de posi√ß√µes: 5 (1¬∫ ao 5¬∫)
Unidades por palpite: 1 √ó 5 = 5
Valor unit√°rio: R$ 10,00 √∑ 5 = R$ 2,00

Cota√ß√£o: 6000x
Pr√™mio por unidade: R$ 2,00 √ó 6000 = R$ 12.000,00
```

**Resultado**: Se acertar 1 milhar em 1 posi√ß√£o:
```
Acertos: 1 unidade
Pr√™mio total: 1 √ó R$ 12.000,00 = R$ 12.000,00
```

### Exemplo 3: Dezena Invertida - "Para cada palpite"

**Aposta**:
- Modalidade: Dezena Invertida
- Palpites: ["23", "45"]
- Posi√ß√£o: 1¬∫ ao 5¬∫
- Valor digitado: R$ 10,00
- Divis√£o: "Para cada palpite"

**C√°lculos**:
```
Quantidade de palpites: 2
Valor por palpite: R$ 10,00
Valor total: R$ 10,00 √ó 2 = R$ 20,00

Permuta√ß√µes de "23": ["23", "32"] = 2
Permuta√ß√µes de "45": ["45", "54"] = 2

Quantidade de posi√ß√µes: 5
Unidades por palpite "23": 2 √ó 5 = 10
Unidades por palpite "45": 2 √ó 5 = 10

Valor unit√°rio "23": R$ 10,00 √∑ 10 = R$ 1,00
Valor unit√°rio "45": R$ 10,00 √∑ 10 = R$ 1,00

Cota√ß√£o: 60x
Pr√™mio por unidade: R$ 1,00 √ó 60 = R$ 60,00
```

**Resultado**: Se acertar "23" em 2 posi√ß√µes e "45" em 1 posi√ß√£o:
```
Acertos "23": 2 unidades √ó R$ 60,00 = R$ 120,00
Acertos "45": 1 unidade √ó R$ 60,00 = R$ 60,00
Pr√™mio total: R$ 180,00
```

---

## üìà Tabela de Cota√ß√µes

### Cota√ß√µes Din√¢micas (de `MODALITIES`)

| Modalidade | Cota√ß√£o |
|------------|---------|
| Grupo | 1x R$ 18.00 |
| Dupla de Grupo | 1x R$ 16.00 |
| Terno de Grupo | 1x R$ 150.00 |
| Quadra de Grupo | 1x R$ 1000.00 |
| Dezena | 1x R$ 60.00 |
| Centena | 1x R$ 600.00 |
| Milhar | 1x R$ 6000.00 |
| Dezena Invertida | 1x R$ 60.00 |
| Centena Invertida | 1x R$ 600.00 |
| Milhar Invertida | 1x R$ 6000.00 |
| Milhar/Centena | 1x R$ 3300.00 |
| Passe vai | 1x R$ 90.00 |
| Passe vai e vem | 1x R$ 90.00 |

### Tabela de Odds Fixa (Fallback)

A tabela fixa √© usada quando a cota√ß√£o din√¢mica n√£o est√° dispon√≠vel. Os valores variam conforme a posi√ß√£o:

**Exemplo - Dupla de Grupo**:
- 1¬∫: 180x
- 1¬∫-3¬∫: 180x
- 1¬∫-5¬∫: 180x
- 1¬∫-7¬∫: 180x

**Exemplo - Milhar**:
- 1¬∫: 5000x
- 1¬∫-3¬∫: 5000x
- 1¬∫-5¬∫: 5000x

---

## üîç Fluxo Completo de Liquida√ß√£o

### Passo 1: Buscar Apostas Pendentes
```typescript
apostasPendentes = buscarApostasComStatus('pendente')
```

### Passo 2: Buscar Resultados Oficiais
```typescript
resultados = buscarResultadosOficiais(loteria, data, horario)
```

### Passo 3: Para Cada Aposta

#### 3.1. Verificar Hor√°rio de Apura√ß√£o
```typescript
if (!jaPassouHorarioApuracao(extracaoId, dataConcurso, horarioAposta)) {
  // Pular aposta - ainda n√£o passou o hor√°rio
  continue
}
```

#### 3.2. Filtrar Resultados
```typescript
resultadosFiltrados = filtrarPorLoteria(resultados, loteriaAposta)
resultadosFiltrados = filtrarPorData(resultadosFiltrados, dataAposta)
resultadosFiltrados = filtrarPorHorario(resultadosFiltrados, horarioAposta)
```

#### 3.3. Converter Resultados
```typescript
milhares = extrairMilhares(resultadosFiltrados)
grupos = milhares.map(m => milharParaGrupo(m))
```

#### 3.4. Conferir Cada Palpite

**Para modalidades num√©ricas**:
```typescript
conferencia = conferirNumero(
  milhares,
  numeroApostado,
  modalidade,
  pos_from,
  pos_to
)
```

**Para modalidades de grupo**:
```typescript
conferencia = conferirGrupo(
  milhares,
  gruposApostados,
  modalidade,
  pos_from,
  pos_to
)
```

#### 3.5. Calcular Pr√™mio
```typescript
odd = buscarOdd(modalidade, pos_from, pos_to, modalityName)
valorUnitario = calcularValorUnitario(valorPorPalpite, unidades)
premioUnidade = odd √ó valorUnitario
premioTotal = conferencia.hits √ó premioUnidade
```

#### 3.6. Atualizar Status
```typescript
if (premioTotal > 0) {
  status = 'liquidado'
  // Creditar pr√™mio na carteira
} else {
  status = 'perdida'
}
```

---

## ‚ö†Ô∏è Regras Importantes

### Valida√ß√µes

1. **Saldo Insuficiente**: O sistema valida se o usu√°rio tem saldo suficiente antes de criar a aposta
2. **Hor√°rio de Apura√ß√£o**: Apostas s√≥ s√£o liquidadas ap√≥s o hor√°rio de apura√ß√£o (`closeTime`)
3. **Posi√ß√£o Obrigat√≥ria**: O usu√°rio deve selecionar uma posi√ß√£o antes de confirmar
4. **Limites de D√≠gitos**: 
   - Dezena: apenas 2 d√≠gitos
   - Centena: apenas 3 d√≠gitos
   - Milhar: apenas 4 d√≠gitos

### Comportamentos Especiais

1. **Apostas Instant√¢neas**: S√£o liquidadas imediatamente ap√≥s cria√ß√£o
2. **Apostas Normais**: Ficam pendentes at√© serem liquidadas pelo cron job
3. **M√∫ltiplas Extra√ß√µes**: Sistema identifica extra√ß√£o correta usando hor√°rio da aposta
4. **Fuso Hor√°rio**: Todas as compara√ß√µes usam hor√°rio de Bras√≠lia (GMT-3)

---

## üìù Notas T√©cnicas

### Estrutura de Dados

```typescript
interface BetData {
  modality: string
  modalityName: string
  animalBets?: number[][]  // Para modalidades de grupo
  numberBets?: string[]    // Para modalidades num√©ricas
  position: string         // Ex: "1-5", "1st"
  customPositionValue?: string  // Ex: "1-3", "7"
  amount: number           // Valor digitado pelo usu√°rio
  divisionType: 'all' | 'each'
}
```

### Fun√ß√µes Principais

- `calcularValorTotalAposta()`: Calcula valor total a ser debitado
- `calcularValorPorPalpite()`: Calcula valor por palpite individual
- `conferirPalpite()`: Confere se palpite ganhou
- `buscarCotacaoDinamica()`: Busca cota√ß√£o da configura√ß√£o
- `buscarOdd()`: Busca multiplicador (din√¢mico ou fixo)
- `jaPassouHorarioApuracao()`: Verifica se j√° pode liquidar

---

## üîó Refer√™ncias

- **Arquivo de Regras**: `/docs/manual-regras-backend.md`
- **Motor de Regras**: `/lib/bet-rules-engine.ts`
- **Parser de Posi√ß√µes**: `/lib/position-parser.ts`
- **Dados de Modalidades**: `/data/modalities.ts`
- **Dados de Animais**: `/data/animals.ts`

---

**√öltima atualiza√ß√£o:** 14 de Janeiro de 2026
